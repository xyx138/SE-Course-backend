# Agent = LLM + MCP + RAG

## 项目简介

这是一个结合大语言模型(LLM)、模型上下文协议(MCP)和检索增强生成(RAG)技术的智能Agent系统。该系统可以通过检索知识库的相关信息，借助大语言模型的理解和推理能力，并通过工具调用执行实际操作，提供智能化的问答和任务执行功能。

## 核心组件

### 1. 大语言模型 (LLM)
- 基于OpenAI兼容接口的LLM客户端
- 支持通义千问等大模型
- 负责自然语言理解、推理和回答生成

### 2. 模型上下文协议 (MCP)
- 基于MCP协议的工具调用框架
- 支持动态加载和使用多种工具
- 提供文件操作、地图查询等工具能力

### 3. 检索增强生成 (RAG)
- 基于向量数据库的知识检索系统
- 支持创建和管理多个知识库
- 利用语义检索技术找到最相关的信息

## 系统架构

```
┌───────────────────┐
│     用户界面      │
│  (Gradio WebUI)   │
└─────────┬─────────┘
          │
┌─────────▼─────────┐
│    Agent 核心     │
└─────────┬─────────┘
          │
┌─────────┴─────────┐
│                   │
▼                   ▼
┌───────────┐  ┌────────────┐  ┌────────────┐
│    LLM    │  │    MCP     │  │    RAG     │
│  客户端   │  │  工具客户端 │  │ 检索系统   │
└───────────┘  └────────────┘  └────────────┘
```

## 功能特点

- **智能问答**：基于知识库内容回答用户问题
- **工具调用**：通过MCP协议使用外部工具执行任务
- **知识管理**：支持创建、更新和删除知识库
- **灵活扩展**：易于添加新的工具和功能

## 安装与配置

### 环境要求

- Python 3.8+
- 必要的Python包（在requirements.txt中列出）

### 安装步骤

1. 克隆代码库
```bash
git clone <仓库URL>
cd agent
```

2. 安装依赖
```bash
pip install -r requirements.txt
```

3. 配置环境变量（创建.env文件）
```
DASHSCOPE_API_KEY=<您的API密钥>
DASHSCOPE_BASE_URL=<API基础URL>
PROJECT_PATH=<项目根目录路径>
```

## 使用方法

### 启动服务
```bash
python src/main.py
```

### 知识库管理
- 创建/更新知识库：上传文件并指定知识库名称
- 删除知识库：选择要删除的知识库
- 切换知识库：选择要使用的知识库

### 智能问答
在聊天界面中输入问题，系统会：
1. 从知识库中检索相关信息
2. 通过大语言模型理解和处理问题
3. 必要时调用外部工具获取额外信息
4. 生成回答并返回给用户

## 项目结构

```
agent/
├── src/
│   ├── main.py          # 主程序入口
│   ├── agent.py         # Agent核心实现
│   ├── llmClient.py     # LLM客户端
│   ├── mcpClient.py     # MCP工具客户端
│   ├── retrieve.py      # 检索模块
│   ├── vectorStore.py   # 向量存储管理
│   └── utils/           # 工具函数
├── knowledge_base/      # 知识库文件存储
├── VectorStore/         # 向量存储数据库
└── mcp.json             # MCP工具配置
```

## 技术说明

### LLM集成
系统使用OpenAI兼容接口连接到LLM服务，支持tool calling等高级功能。

### MCP工具
- 基于标准MCP协议实现工具调用
- 支持多种工具服务并行运行
- 提供标准化的工具描述和调用接口

### RAG系统
- 使用DashScope Embedding生成文档向量
- 支持相似度阈值过滤和重排序
- 可处理多种文档格式

## 扩展开发

### 添加新工具
1. 在mcp.json中添加新的工具服务配置
2. 实现符合MCP协议的工具服务
3. 重启系统使新工具生效

### 优化检索系统
可以通过调整以下参数优化检索效果：
- similarity_threshold：相似度阈值
- chunk_cnt：返回的文档块数量

## 许可证

[许可证信息]

## 贡献指南

[贡献指南]

## 致谢

感谢所有为本项目做出贡献的开发者。

---

希望这个智能Agent系统能够帮助您更高效地处理信息和执行任务！